{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/davidzoufaly/code/dp/crm-app-fe/components/CustomClientFields.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport AddOrEditField from \"../components/AddOrEditField\";\nimport axios from \"axios\";\nimport globalVars from \"../library/globalVariables\";\nimport CustomFields from \"./CustomFieldsList\";\n\nconst CustomClientFields = ({\n  fields,\n  refreshList\n}) => {\n  const {\n    0: editedField,\n    1: setEditedField\n  } = useState({\n    fieldName: \"\",\n    fieldType: \"text\",\n    fieldPermanent: false,\n    fieldOptions: []\n  });\n\n  const saveEditedField = async () => {\n    const res = await axios({\n      method: \"post\",\n      url: `${globalVars.serverURL}/fields/`,\n      data: editedField,\n      responseType: \"json\"\n    });\n    const data = await res.data;\n    data.msg === \"Success\" ? changeDisplayComponent() : null;\n    console.log(editedField);\n    refreshList();\n  };\n\n  const deleteField = async event => {\n    const id = event.target.id;\n    const res = await axios({\n      method: \"delete\",\n      url: `${globalVars.serverURL}/fields/${id}`,\n      responseType: \"json\"\n    });\n    const resData = await res.data;\n    resData.msg === \"Success\" ? refreshList() : null;\n  };\n\n  const onNameChange = event => {\n    setEditedField(_objectSpread({}, editedField, {\n      fieldName: event.target.value\n    }));\n    console.log(editedField);\n  };\n\n  const onSelectChange = event => {\n    setEditedField(_objectSpread({}, editedField, {\n      fieldType: event.target.options[event.target.options.selectedIndex].value\n    }));\n  };\n\n  const handleOptionSpawn = () => {\n    setEditedField(_objectSpread({}, editedField, {\n      fieldOptions: [...editedField.fieldOptions, {\n        id: uniqid(),\n        value: \"\"\n      }]\n    }));\n  };\n\n  const onOptionChange = event => {\n    setEditedField(_objectSpread({}, editedField, {\n      fieldOptions: editedField.fieldOptions.filter(e => event.target.id === e.id ? e.value = event.target.value : e)\n    }));\n  }; // NEPOTŘEBA?\n  // const onDelete = (event: any) => {\n  //   setEditedField({\n  //     ...editedField,\n  //     fieldOptions: editedField.fieldOptions.filter((e: any) =>\n  //       event.target.id !== e.id ? e : null\n  //     )\n  //   });\n  // };\n  // const setupEditedField = (obj ? : any) => {\n  //   setEditedField(obj);\n  // }\n\n\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Custom Client Fields\"), __jsx(CustomFields, {\n    deleteField: deleteField,\n    fields: fields,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), __jsx(AddOrEditField, {\n    editedField: editedField,\n    refreshList: refreshList,\n    saveEditedField: saveEditedField,\n    onNameChange: onNameChange,\n    onSelectChange: onSelectChange,\n    handleOptionSpawn: handleOptionSpawn,\n    onOptionChange: onOptionChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }));\n};\n\nexport default CustomClientFields;","map":{"version":3,"sources":["/Users/davidzoufaly/code/dp/crm-app-fe/components/CustomClientFields.tsx"],"names":["useState","AddOrEditField","axios","globalVars","CustomFields","CustomClientFields","fields","refreshList","editedField","setEditedField","fieldName","fieldType","fieldPermanent","fieldOptions","saveEditedField","res","method","url","serverURL","data","responseType","msg","changeDisplayComponent","console","log","deleteField","event","id","target","resData","onNameChange","value","onSelectChange","options","selectedIndex","handleOptionSpawn","uniqid","onOptionChange","filter","e"],"mappings":"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","sourcesContent":["\nimport { useState } from \"react\";\nimport AddOrEditField from \"../components/AddOrEditField\";\nimport axios from \"axios\";\nimport globalVars from \"../library/globalVariables\";\nimport CustomFields from \"./CustomFieldsList\";\n\nconst CustomClientFields = ({ fields, refreshList }: any) => {\n  const [editedField, setEditedField] = useState({\n    fieldName: \"\",\n    fieldType: \"text\",\n    fieldPermanent: false,\n    fieldOptions: []\n  })\n\n  const saveEditedField = async () => {\n    const res = await axios({\n      method: \"post\",\n      url: `${globalVars.serverURL}/fields/`,\n      data: editedField,\n      responseType: \"json\"\n    });\n    const data = await res.data;\n    data.msg === \"Success\" ? changeDisplayComponent() : null;\n    console.log(editedField);\n    refreshList();\n  };\n\n  const deleteField = async (event : any) => {\n    const id = event.target.id;\n    const res = await axios({\n        method: \"delete\",\n        url:`${globalVars.serverURL}/fields/${id}`,\n        responseType: \"json\"\n    })\n    const resData = await res.data;\n    resData.msg === \"Success\" ? refreshList() : null;\n  }\n\n  const onNameChange = (event: any) => {\n    setEditedField({ ...editedField, fieldName: event.target.value});\n    console.log(editedField);\n  };\n\n  const onSelectChange = (event: any) => {\n    setEditedField({\n      ...editedField,\n      fieldType: event.target.options[event.target.options.selectedIndex].value\n    });\n  };\n\n  const handleOptionSpawn = () => {\n    setEditedField({\n      ...editedField,\n      fieldOptions: [...editedField.fieldOptions, { id: uniqid(), value: \"\" }]\n    });\n  };\n\n  const onOptionChange = (event: any) => {\n    setEditedField({\n      ...editedField,\n      fieldOptions: editedField.fieldOptions.filter((e: any) =>\n        event.target.id === e.id ? (e.value = event.target.value) : e\n      )\n    });\n  };\n\n  // NEPOTŘEBA?\n  // const onDelete = (event: any) => {\n  //   setEditedField({\n  //     ...editedField,\n  //     fieldOptions: editedField.fieldOptions.filter((e: any) =>\n  //       event.target.id !== e.id ? e : null\n  //     )\n  //   });\n  // };\n\n  // const setupEditedField = (obj ? : any) => {\n  //   setEditedField(obj);\n  // }\n\n  return (\n    <div>\n      <h2>Custom Client Fields</h2>\n      <CustomFields deleteField={deleteField} fields={fields}/>\n      <AddOrEditField editedField={editedField} refreshList={refreshList} saveEditedField={saveEditedField} onNameChange={onNameChange} onSelectChange={onSelectChange} handleOptionSpawn={handleOptionSpawn} onOptionChange={onOptionChange}/>\n    </div>\n  );\n};\n\nexport default CustomClientFields;\n"]},"metadata":{},"sourceType":"module"}