{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/davidzoufaly/code/dp/crm-app-fe/pages/_app.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport App from \"next/app\";\nimport Head from \"next/head\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\nimport CountContext from \"../components/CountContext\";\nimport UserContext from \"../components/UserContext\";\nimport globalVars from \"../library/globalVariables\";\nimport theme from \"../src/theme\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nexport default class MyApp extends App {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      counters: {\n        clientCounter: \"\",\n        emailsCounter: \"\",\n        fieldCounter: \"\"\n      },\n      user: \"\"\n    });\n\n    _defineProperty(this, \"getCounts\", async () => {\n      const resClientCount = await axios({\n        method: \"GET\",\n        url: `${globalVars.serverURL}/clients/count`,\n        responseType: \"json\"\n      });\n      const clientCounter = await resClientCount.data;\n      const resFieldsData = await axios({\n        method: \"GET\",\n        url: `${globalVars.serverURL}/fields/count`,\n        responseType: \"json\"\n      });\n      const fieldCounter = await resFieldsData.data;\n      const resEmailsCount = await axios({\n        method: \"GET\",\n        url: `${globalVars.serverURL}/emails/count`,\n        responseType: \"json\"\n      });\n      const emailsCounter = await resEmailsCount.data;\n      this.setState({\n        clientCounter,\n        fieldCounter,\n        emailsCounter\n      });\n    });\n\n    _defineProperty(this, \"setUser\", user => {\n      this.setState(_objectSpread({}, this.state, {\n        user\n      }));\n      Router.push('/dashboard');\n      sessionStorage.setItem('user', this.state.user);\n    });\n\n    _defineProperty(this, \"checkUser\", () => {\n      // this.state.user === \"\"\n      // sessionStorage.getItem('user') \n      //   ? Router.push('/')\n      //   : null\n      console.log(sessionStorage.getItem('user'));\n    });\n\n    _defineProperty(this, \"logoutUser\", () => {\n      this.setState(_objectSpread({}, this.state, {\n        user: \"\"\n      }));\n      sessionStorage.removeItem('user');\n      Router.push('/');\n    });\n  }\n\n  componentDidMount() {\n    const jssStyles = document.querySelector(\"#jss-server-side\");\n\n    if (jssStyles) {\n      jssStyles.parentNode.removeChild(jssStyles);\n    }\n\n    this.getCounts();\n  }\n\n  componentDidUpdate() {\n    console.log(this.state.user);\n  }\n\n  render() {\n    const {\n      Component,\n      pageProps\n    } = this.props;\n    return __jsx(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"CRM APP\")), __jsx(UserContext.Provider, {\n      value: {\n        setUser: this.setUser,\n        logoutUser: this.logoutUser,\n        checkUser: this.checkUser\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, __jsx(CountContext.Provider, {\n      value: this.state.counters,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, __jsx(ThemeProvider, {\n      theme: theme,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, __jsx(CssBaseline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), __jsx(Component, _extends({}, pageProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/davidzoufaly/code/dp/crm-app-fe/pages/_app.tsx"],"names":["React","App","Head","Router","axios","CountContext","UserContext","globalVars","theme","ThemeProvider","CssBaseline","MyApp","counters","clientCounter","emailsCounter","fieldCounter","user","resClientCount","method","url","serverURL","responseType","data","resFieldsData","resEmailsCount","setState","state","push","sessionStorage","setItem","console","log","getItem","removeItem","componentDidMount","jssStyles","document","querySelector","parentNode","removeChild","getCounts","componentDidUpdate","render","Component","pageProps","props","setUser","logoutUser","checkUser"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport App from \"next/app\";\nimport Head from \"next/head\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\nimport CountContext from \"../components/CountContext\";\nimport UserContext from \"../components/UserContext\";\nimport globalVars from \"../library/globalVariables\";\nimport theme from \"../src/theme\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nexport default class MyApp extends App {\n  state = {\n    counters: { clientCounter: \"\", emailsCounter: \"\", fieldCounter: \"\" },\n    user: \"\"\n  };\n\n  componentDidMount() {\n    const jssStyles = document.querySelector(\"#jss-server-side\");\n    if (jssStyles) {\n      jssStyles.parentNode.removeChild(jssStyles);\n    }\n    this.getCounts();\n  }\n\n  getCounts = async () => {\n    const resClientCount = await axios({\n      method: \"GET\",\n      url: `${globalVars.serverURL}/clients/count`,\n      responseType: \"json\"\n    });\n    const clientCounter = await resClientCount.data;\n\n    const resFieldsData = await axios({\n      method: \"GET\",\n      url: `${globalVars.serverURL}/fields/count`,\n      responseType: \"json\"\n    });\n    const fieldCounter = await resFieldsData.data;\n\n    const resEmailsCount = await axios({\n      method: \"GET\",\n      url: `${globalVars.serverURL}/emails/count`,\n      responseType: \"json\"\n    });\n    const emailsCounter = await resEmailsCount.data;\n\n    this.setState({\n      clientCounter,\n      fieldCounter,\n      emailsCounter\n    });\n  };\n\n  setUser = user => {\n    this.setState({\n      ...this.state,\n      user\n    });\n    Router.push('/dashboard');\n    sessionStorage.setItem('user', this.state.user);\n  };\n\n  checkUser = () =>Â {\n    // this.state.user === \"\"\n    // sessionStorage.getItem('user') \n    //   ? Router.push('/')\n    //   : null\n    console.log(sessionStorage.getItem('user'));\n  }\n\n  logoutUser = () => {\n    this.setState({\n      ...this.state,\n      user : \"\"\n    })\n    sessionStorage.removeItem('user');\n    Router.push('/');\n  }\n\n  componentDidUpdate() {\n    console.log(this.state.user);\n  }\n\n  render() {\n    const { Component, pageProps } = this.props;\n\n    return (\n      <React.Fragment>\n        <Head>\n          <title>CRM APP</title>\n        </Head>\n        <UserContext.Provider\n          value={{ setUser: this.setUser, logoutUser: this.logoutUser, checkUser: this.checkUser }}\n        >\n          <CountContext.Provider value={this.state.counters}>\n            <ThemeProvider theme={theme}>\n              <CssBaseline />\n              <Component {...pageProps} />\n            </ThemeProvider>\n          </CountContext.Provider>\n        </UserContext.Provider>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}