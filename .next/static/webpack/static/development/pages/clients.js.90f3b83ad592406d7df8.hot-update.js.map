{"version":3,"file":"static/webpack/static/development/pages/clients.js.90f3b83ad592406d7df8.hot-update.js","sources":["webpack:///./components/CreateClient.tsx","webpack:///./components/clients/ClientForm.tsx"],"sourcesContent":["import Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ClientForm from \"./clients/ClientForm\";\nimport { useEffect, useReducer } from \"react\";\nimport axios from \"axios\";\nimport globalVars from \"../library/globalVariables\";\nimport generateUniqueId from \"generate-unique-id\";\n\nconst CreateClient = ({\n  fields,\n  isClientAdded,\n  toggleIsClientAdded,\n  addNewClientToState\n}: any) => {\n  const initialNewClintState = fields\n    .map((e: any) => e.fieldName)\n    .reduce((o, key) => Object.assign(o, { [key]: \"\" }), {});\n\n  const [newClient, setNewClient] = useReducer((state, action) => {\n    switch (action.type) {\n      case \"onTextChange\":\n        return {\n          ...state,\n          [action.payload.fieldName]:\n            action.payload.fieldType === \"number\"\n              ? parseInt(action.payload.value)\n              : action.payload.value\n        };\n      case \"addId\" : \n        return {...state, _id : generateUniqueId({length: 24, useNumbers: true, useLetters: false, includeSymbols: [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"]})}\n      \n      case \"clear\":\n        return initialNewClintState;\n\n      default:\n        return state;\n    }\n  }, initialNewClintState);\n\n  const onChange = (fieldName, fieldType, event) => {\n    setNewClient({type: \"addId\"})\n    setNewClient({\n      type: \"onTextChange\",\n      payload: { fieldName, value: event.target.value, fieldType }\n    });\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    const clientRes = await axios({\n      method: \"post\",\n      data: newClient,\n      url: `${globalVars.serverURL}/clients`,\n      responseType: \"json\"\n    });\n    const clientData = await clientRes.data;\n    if (clientData.msg === \"Success\") {\n      setNewClient({\n        type: \"clear\"\n      });\n      toggleIsClientAdded();\n      addNewClientToState(newClient);\n    }\n  };\n\n  const onCancel = () => {\n    setNewClient({\n      type: \"clear\"\n    });\n    toggleIsClientAdded();\n  };\n\n  useEffect(() => {\n    // console.log(newClient);\n  });\n\n  return isClientAdded ? (\n    <div>\n      <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n        Add new client\n      </Typography>\n      <form onSubmit={onSubmit}>\n        <ClientForm fields={fields} onChange={onChange} newClient={newClient} />\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n          Save\n        </Button>\n        <Button variant=\"contained\" color=\"secondary\" onClick={onCancel}>\n          Cancel\n        </Button>\n      </form>\n    </div>\n  ) : null;\n};\n\nexport default CreateClient;\n","import stringMethods from \"../../library/stringMethods\";\n\nconst ClientForm = ({ fields, onChange, newClient }: any) => {\n  const inputs = fields.map((e: any) => {\n    if (e.fieldName !== \"dateAdded\" && e.fieldName !== \"dateModified\") {\n      if (e.fieldType === \"text\") {\n        return (\n          <div key={e.fieldName}>\n            <p>\n              {new stringMethods(e.fieldName)\n                .camelStringToText()\n                .firstCharUpperCase()\n                .getString()}\n            </p>\n            <input\n              type=\"text\"\n              name={e.fieldName}\n              onChange={() => onChange(e.fieldName, e.fieldType, event)}\n              value={newClient[e.fieldName]}\n            />\n          </div>\n        );\n      } else if (e.fieldType === \"number\") {\n        return (\n          <div key={e.fieldName}>\n            <p>{e.fieldName}</p>\n            <input\n              type=\"number\"\n              name={e.fieldName}\n              onChange={() => onChange(e.fieldName, e.fieldType, event)}\n            />\n          </div>\n        );\n      } else if (e.fieldType === \"select\") {\n        return (\n          <div key={e.fieldName}>\n            <p>{e.fieldName}</p>\n            <select\n              name={e.fieldName}\n              onChange={() => onChange(e.fieldName, e.fieldType, event)}\n            >\n              <option>---</option>\n              {e.fieldOptions.map((e: any) => {\n                return (\n                  <option value={e.value} key={e.id}>\n                    {e.value}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n        );\n      }\n    }\n  });\n  return <div>{inputs}</div>;\n};\n\nexport default ClientForm;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AAxBA;AAAA;AACA;AAyBA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AACA;AAHA;AAEA;AAFA;AAAA;AACA;AADA;AAQA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAiBA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;;;;;;;;;;;;;;;;AC9FA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}