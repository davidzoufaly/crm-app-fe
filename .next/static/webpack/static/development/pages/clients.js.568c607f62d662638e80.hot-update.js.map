{"version":3,"file":"static/webpack/static/development/pages/clients.js.568c607f62d662638e80.hot-update.js","sources":["webpack:///./components/CreateClient.tsx"],"sourcesContent":["import Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport ClientForm from \"./ClientForm\";\nimport { useEffect, useState, useReducer } from \"react\";\nimport axios from \"axios\";\nimport globalVars from \"../library/globalVariables\";\n\nconst CreateClient = ({\n  fields,\n  isClientAdded,\n  toggleIsClientAdded,\n  refreshList\n}: any) => {\n\n  const initialNewClintState = fields\n    .map((e: any) => e.fieldName)\n    .reduce((o, key) => Object.assign(o, { [key]: \"\" }), {});\n\n  // const [newClient, setNewClient] = useState(initialNewClintState);\n\n  const [newClient, dispatch] = useReducer((state, action) => {\n    switch(action.type) {\n      case 'onChange':\n        return {\n          \n        }\n    }\n  }, initialNewClintState)\n\n  const onChange = (fieldName, fieldType, event) => {\n    fieldType === \"number\"\n      ? setNewClient({\n          ...newClient,\n          [fieldName]: parseInt(event.target.value)\n        })\n      : setNewClient({ ...newClient, [fieldName]: event.target.value });\n  };\n\n  const onSubmit = async(e) => {\n    e.preventDefault();\n    const clientRes = await axios({\n      method: \"post\",\n      data: newClient,\n      url: `${globalVars.serverURL}/clients`,\n      responseType: \"json\"\n    });\n    const clientData = await clientRes.data;\n    if (clientData.msg === \"Success\") {\n      setNewClient(initialNewClintState);\n      toggleIsClientAdded();\n      refreshList();\n    }\n  };\n\n  const onCancel = () => {\n    setNewClient(initialNewClintState);\n    toggleIsClientAdded();\n  };\n\n  useEffect(() => {\n    // console.log(newClient);\n  });\n\n  return isClientAdded ? (\n    <div>\n      <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n        Add new client\n      </Typography>\n      <form onSubmit={onSubmit}>\n      <ClientForm fields={fields} onChange={onChange} newClient={newClient} />\n      <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n        Save\n      </Button>\n      <Button variant=\"contained\" color=\"secondary\" onClick={onCancel}>\n        Cancel\n      </Button>\n      </form>\n    </div>\n  ) : null;\n};\n\nexport default CreateClient;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AALA;AASA;AACA;AACA;AAFA;AAMA;AAfA;AAAA;AACA;AAgBA;AACA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AACA;AAHA;AAEA;AAFA;AAAA;AACA;AADA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}